jython_memory: "12288m"
formplayer_memory: "12288m"
# workers = static_factor + (factor * cpu_count)
gunicorn_workers_factor: 0
gunicorn_workers_static_factor: 6

celery_processes:
  echis_server0:
    beat: {}
    flower: {}
    export_download_queue:
      concurrency: 5
    email_queue:
      pooling: gevent
      concurrency: 50
      num_workers: 2
    case_import_queue:
      concurrency: 4
    celery:
      concurrency: 4
    saved_exports_queue:
      concurrency: 3
      max_tasks_per_child: 3
      concurrency: 1
      optimize: True
#    celery,export_download_queue,email_queue,case_import_queue:
#      concurrency: 8
#      max_tasks_per_child: 50
  echis_server3:
    saved_exports_queue:
      concurrency: 3
      max_tasks_per_child: 3
      concurrency: 1
      optimize: True
    celery_periodic:
      concurrency: 4
    submission_reprocessing_queue:
      concurrency: 3
    reminder_case_update_queue:
      pooling: gevent
      concurrency: 3
    reminder_queue:
      pooling: gevent
      concurrency: 5
    reminder_rule_queue:
      concurrency: 3
      max_tasks_per_child: 3
    sms_queue:
      pooling: gevent
      concurrency: 5
    sumologic_logs_queue:
      pooling: gevent
      concurrency: 20
    repeat_record_queue:
      pooling: gevent
      num_workers: 5
      concurrency: 20
    ucr_indicator_queue,ucr_queue:
      concurrency: 16
      max_tasks_per_child: 50
#    celery,export_download_queue,email_queue,case_import_queue:
#      concurrency: 8
#      max_tasks_per_child: 50
    background_queue,case_rule_queue,analytics_queue:
      concurrency: 10
      max_tasks_per_child: 50
    ils_gateway_sms_queue:
      pooling: gevent
      concurrency: 10
    logistics_reminder_queue:
      concurrency: 10
    logistics_background_queue:
      concurrency: 10
    send_report_throttled:
      concurrency: 10
    async_restore_queue:
      concurrency: 10

pillows:
  echis_server0:
    CacheInvalidatePillow:
      num_processes: 3
    DefaultChangeFeedPillow:
      num_processes: 5
    GroupPillow:
      num_processes: 2
    GroupToUserPillow:
      num_processes: 2
    SqlSMSPillow:
      num_processes: 2
  echis_server2:
    UnknownUsersPillow:
      num_processes: 2
    UpdateUserSyncHistoryPillow:
      num_processes: 2
    UserCacheInvalidatePillow:
      num_processes: 2
    UserGroupsDbKafkaPillow:
      num_processes: 2
    UserPillow:
      num_processes: 2
    AppDbChangeFeedPillow:
      num_processes: 5
    FormSubmissionMetadataTrackerPillow:
      num_processes: 5
    ApplicationToElasticsearchPillow:
      num_processes: 5
    CaseToElasticsearchPillow:
      num_processes: 5
    DomainDbKafkaPillow:
      num_processes: 5
    KafkaDomainPillow:
      num_processes: 5
    XFormToElasticsearchPillow:
      num_processes: 5
    kafka-ucr-static:
      num_processes: 5
    kafka-ucr-main:
      num_processes: 5
    CaseSearchToElasticsearchPillow:
      num_processes: 2
    LedgerToElasticsearchPillow:
      num_processes: 2

{"notify_list":[],"description":"","template_variables":[{"default":"production","prefix":"environment","name":"environment"}],"is_read_only":false,"id":"g9s-pw6-tpg","title":"HQ vitals","url":"/dashboard/g9s-pw6-tpg/hq-vitals","created_at":"2015-10-16T14:57:20.098883+00:00","modified_at":"2019-07-04T08:52:19.038562+00:00","author_handle":"skelly@dimagi.com","widgets":[{"definition":{"widgets":[{"definition":{"requests":[{"q":"sum:commcare.xform_submissions.count{$environment,status_code:201} by {domain}.as_count()","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","title":"Successful Submissions from top domains"},"id":387748524},{"definition":{"requests":[{"q":"avg:gunicorn.request.duration.avg{$environment}.rollup(max)","style":{"line_width":"thin","palette":"dog_classic","line_type":"solid"},"display_type":"line"},{"q":"avg:gunicorn.request.duration.95percentile{$environment}.rollup(max)","style":{"line_width":"normal","palette":"purple","line_type":"solid"},"display_type":"line"},{"q":"avg:gunicorn.request.duration.max{$environment}.rollup(max)","style":{"line_width":"normal","palette":"purple","line_type":"solid"},"display_type":"line"},{"q":"avg:gunicorn.request.duration.median{$environment}.rollup(max)","style":{"line_width":"normal","palette":"purple","line_type":"solid"},"display_type":"line"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"markers":[{"display_type":"error dashed","value":"y = 7"}],"title":"gunicorn response time (avg, 95th percentile & max; max rollup)"},"id":412036159},{"definition":{"requests":[{"q":"avg:gunicorn.request.duration.avg{$environment,group:hq_webworkers}.rollup(max)","style":{"line_width":"thin","palette":"dog_classic","line_type":"solid"},"display_type":"line"},{"q":"avg:gunicorn.request.duration.95percentile{$environment,group:hq_webworkers}.rollup(max)","style":{"line_width":"normal","palette":"purple","line_type":"solid"},"display_type":"line"},{"q":"avg:gunicorn.request.duration.max{$environment,group:hq_webworkers}.rollup(max)","style":{"line_width":"normal","palette":"purple","line_type":"solid"},"display_type":"line"},{"q":"avg:gunicorn.request.duration.median{$environment,group:hq_webworkers}.rollup(max)","style":{"line_width":"normal","palette":"purple","line_type":"solid"},"display_type":"line"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"markers":[{"display_type":"error dashed","value":"y = 7"}],"title":"HQ webworker response time (avg, 95th percentile & max; max rollup)"},"id":65612738},{"definition":{"title":"Nginx response time","yaxis":{"include_zero":false,"scale":"sqrt"},"markers":[{"display_type":"error dashed","value":"y = 7"}],"requests":[{"q":"avg:nginx.timings{$environment}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}]},"id":272836918},{"definition":{"requests":[{"q":"avg:nginx.apdex{$environment}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"title":"Nginx apdex","type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"yaxis":{"max":"1","include_zero":false}},"id":381496532},{"definition":{"requests":[{"q":"sum:nginx.net.request_per_s{$environment}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Nginx Requests / s"},"id":65612750},{"definition":{"requests":[{"q":"sum:nginx.net.connections{$environment}, sum:nginx.net.writing{$environment}, sum:nginx.net.waiting{$environment}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Nginx connections"},"id":371274461},{"definition":{"requests":[{"q":"avg:nginx.timings{$environment}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"},{"q":"avg:gunicorn.request.duration.avg{$environment}","style":{"line_width":"normal","palette":"dog_classic","line_type":"dotted"},"display_type":"line"}],"title":"Nginx response time (avg, log scale)","type":"timeseries","markers":[{"display_type":"error dashed","value":"y = 7"}],"yaxis":{"include_zero":false,"scale":"log"}},"id":383182718},{"definition":{"title":"HQ 500 errors (as % or requests)","yaxis":{"max":"100","scale":"log","include_zero":false},"markers":[{"display_type":"error dashed","value":"y = 1"}],"requests":[{"q":"sum:nginx.requests{$environment,status_code:500} by {url_group}*100/sum:nginx.requests{$environment}","style":{"line_width":"normal","palette":"warm","line_type":"solid"},"display_type":"area"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}]},"id":65612754},{"definition":{"requests":[{"q":"sum:commcare.sentry.errors.rate_limited{$environment} by {service}.as_count()","style":{"line_width":"normal","palette":"warm","line_type":"solid"},"display_type":"bars"}],"title":"Errors rate limited","type":"timeseries","yaxis":{"scale":"sqrt"}},"id":200684876},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment} by {status_code}.as_rate()","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","title":"Requests by status code (rate)"},"id":383300999},{"definition":{"requests":[{"q":"sum:commcare.xform_submissions.count{$environment} by {submission_type}.as_rate()","display_type":"area"}],"type":"timeseries","title":"Form submission rate by submission_type"},"id":200542368},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment} by {url_group}.as_rate()","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","title":"Requests by url group (per second)"},"id":201899728},{"definition":{"requests":[{"q":"sum:commcare.xform_submissions.count{$environment} by {duration}.as_count()","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","title":"Form submission timing"},"id":200981468},{"definition":{"requests":[{"q":"sum:commcare.restores.count{$environment} by {status_code}.as_rate()","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"area"}],"type":"timeseries","title":"Successful Restore rate"},"id":198911016},{"definition":{"requests":[{"q":"sum:commcare.restores.count{$environment} by {duration}.as_count()","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"}],"title":"Restore Count by Time Bucket","type":"timeseries","yaxis":{"include_zero":false}},"id":198911019},{"definition":{"requests":[{"q":"avg:nginx.error_logs{$environment,log_level:error} by {error_type}.as_count()","style":{"line_width":"normal","palette":"orange","line_type":"solid"},"display_type":"bars"},{"q":"avg:nginx.error_logs{$environment,log_level:warn} by {error_type}.as_count()","style":{"line_width":"normal","palette":"purple","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","title":"Nginx error/warn"},"id":3599407412324190},{"definition":{"requests":[{"q":"top(sum:nginx.requests{$environment} by {url_group}.as_count(), 25, 'sum', 'desc')","style":{"palette":"dog_classic"}}],"type":"toplist","title":"Top requests"},"id":1371239684749932},{"definition":{"requests":[{"q":"100*sum:nginx.requests{url_group:phone/restore,$environment} by {status_code}.as_count()/sum:nginx.requests{url_group:phone/restore,$environment}.as_count()","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"area"}],"type":"timeseries","title":"Restore requests by status code (%)"},"id":4114301157210736},{"definition":{"requests":[{"q":"100*sum:nginx.requests{$environment,url_group:receiver} by {status_code}.as_count()/sum:nginx.requests{$environment,url_group:receiver}.as_count()","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"area"}],"type":"timeseries","title":"Form submission requests by status code (%)"},"id":5610529191195484},{"definition":{"requests":[{"q":"avg:gunicorn.request.duration.avg{$environment} by {host}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"markers":[{"display_type":"error dashed","value":"y = 7"}],"title":"gunicorn response time by host (avg)"},"id":406795560566138}],"layout_type":"ordered","type":"group","title":"Requests & Errors"},"id":7051525359522110},{"definition":{"widgets":[{"definition":{"requests":[{"q":"avg:system.mem.used{$environment,group:webworkers} by {host}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"},{"q":"avg:system.mem.total{$environment,group:webworkers} by {host}","style":{"line_width":"normal","palette":"dog_classic","line_type":"dashed"},"display_type":"line"}],"type":"timeseries","title":"Webworker RAM usage"},"id":379828613},{"definition":{"requests":[{"q":"sum:gunicorn.requests{$environment} by {group}.as_rate()","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"area"}],"type":"timeseries","title":"gunicorn requests/s by group"},"id":375465210},{"definition":{"title":"gunicorn response time by host (max rollup of median, sqrt to accentuate difference)","yaxis":{"scale":"sqrt"},"markers":[{"display_type":"error dashed","value":"y = 7"}],"requests":[{"q":"max:gunicorn.request.duration.median{$environment} by {group}.rollup(max)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","events":[{"q":"tags:environment:$environment ","tags_execution":"and"}]},"id":375295042},{"definition":{"requests":[{"q":"100*sum:gunicorn.workers{$environment,state:working} by {group}/(sum:gunicorn.workers{$environment,state:idle} by {group}+sum:gunicorn.workers{$environment,state:working} by {group})","style":{"line_width":"normal","palette":"purple","line_type":"solid"},"display_type":"line","metadata":[{"alias_name":"Workers in use","expression":"100*sum:gunicorn.workers{$environment,state:working} by {group}/(sum:gunicorn.workers{$environment,state:idle} by {group}+sum:gunicorn.workers{$environment,state:working} by {group})"}]}],"title":"Gunicorn workers in use (%)","type":"timeseries","markers":[{"display_type":"error dashed","value":"y = 100"}],"yaxis":{"max":"100"}},"id":273353334},{"definition":{"requests":[{"q":"sum:gunicorn.workers{$environment,state:working} by {group}","style":{"line_width":"normal","palette":"purple","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Gunicorn workers in use"},"id":1919746117676436},{"definition":{"events":[{"q":"tags:environment:$environment ","tags_execution":"and"}],"requests":[{"q":"avg:gunicorn.requests{$environment} by {host}.as_rate()","style":{"palette":"cool"}}],"type":"heatmap","legend_size":"0","title":"HQ django throughput (rps)"},"id":65613526},{"definition":{"requests":[{"q":"100-min:system.cpu.idle{$environment,group:webworkers} by {host}.rollup(min)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"title":"Webworker CPU percent usage","type":"timeseries","yaxis":{"max":"100"}},"id":379741435}],"layout_type":"ordered","type":"group","title":"Webworkers"},"id":4348976180168260},{"definition":{"widgets":[{"definition":{"requests":[{"q":"avg:system.load.norm.1{$environment} by {host}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Normalized load average by host (1=100% CPU)"},"id":195950917},{"definition":{"requests":[{"q":"avg:system.net.bytes_sent{$environment} by {host}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Network bytes Sent"},"id":297503562},{"definition":{"requests":[{"q":"avg:system.net.bytes_rcvd{$environment} by {host}","style":{"palette":"dog_classic"}}],"type":"heatmap","legend_size":"0","title":"Network bytes Received"},"id":297503042},{"definition":{"style":{"fill_min":"0","fill_max":"1","palette":"green_to_orange","palette_flip":false},"group":["group"],"title":"Host Map (color = load, size = free mem)","no_metric_hosts":true,"scope":["$environment"],"requests":{"size":{"q":"avg:system.mem.pct_usable{$environment} by {host}"},"fill":{"q":"avg:system.load.norm.1{$environment} by {host}"}},"no_group_hosts":true,"type":"hostmap"},"id":65613737},{"definition":{"requests":[{"q":"avg:system.io.util{$environment} by {host}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","markers":[{"display_type":"warning dashed","value":"y = 80"},{"display_type":"error solid","value":"y = 90"}],"title":"io.util - https://stackoverflow.com/a/35509278/10840"},"id":375137663},{"definition":{"requests":[{"q":"max:aws.ec2.status_check_failed_system{$environment} by {host}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"},{"q":"max:aws.ec2.status_check_failed_instance{$environment} by {host}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"EC2 Status checks failed by host"},"id":408264249}],"layout_type":"ordered","type":"group","title":"Hosts"},"id":4642782479378816},{"definition":{"widgets":[{"definition":{"requests":[{"q":"sum:couch.timings{$environment} by {database}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"title":"Total Couch request duration by database","type":"timeseries","yaxis":{"include_zero":false,"scale":"sqrt"}},"id":65612779},{"definition":{"requests":[{"q":"avg:couch.timings{$environment} by {group}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"title":"Couch request duration by host group","type":"timeseries","yaxis":{"include_zero":false,"scale":"sqrt"}},"id":383628302},{"definition":{"requests":[{"q":"avg:trace.requests.request.duration.by.service.50p{env:production,service::25984}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"},{"q":"avg:trace.requests.request.duration.by.service.75p{env:production,service::25984}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"},{"q":"avg:trace.requests.request.duration.by.service.90p{env:production,service::25984}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"},{"q":"avg:trace.requests.request.duration.by.service.95p{env:production,service::25984}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"},{"q":"avg:trace.requests.request.duration.by.service.99p{env:production,service::25984}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"title":"Latency on couchdb2 (PROD ONLY)","type":"timeseries","yaxis":{"include_zero":false,"scale":"sqrt"}},"id":396627867},{"definition":{"requests":[{"q":"sum:trace.requests.request.errors{service::25984,$environment} by {group}.as_count()","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"title":"Error status codes on couchdb2","type":"timeseries","yaxis":{"scale":"sqrt"}},"id":401648558},{"definition":{"requests":[{"q":"sum:trace.requests.request.hits{service::25984,$environment} by {http.status_code}.as_count()","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"title":"All status codes on couchdb2","type":"timeseries","yaxis":{"include_zero":false,"scale":"log"}},"id":1437096585010208},{"definition":{"requests":[{"q":"diff(sum:couchdb.fabric.open_shard.timeouts{$environment})","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"title":"Sum of couchdb.fabric.open_shard.timeouts over $environment","type":"timeseries","yaxis":{"min":"0"}},"id":3879466675155630},{"definition":{"requests":[{"q":"max:couchdb.active_tasks.indexer.count{$environment} by {instance}.rollup(max)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Active indexers by couch node (max rollup)"},"id":4714887564414386},{"definition":{"tick_pos":"50%","font_size":"16","type":"note","tick_edge":"left","text_align":"left","content":"For more detail see [CouchDB Dashboard](https://app.datadoghq.com/screen/177642/couchdb-dashboard)","background_color":"blue"},"id":2903389362694796}],"layout_type":"ordered","type":"group","title":"CouchDB"},"id":8364683275069660},{"definition":{"widgets":[{"definition":{"requests":[{"q":"sum:postgresql.rows_fetched{$environment} by {db,host}, sum:postgresql.rows_returned{$environment} by {db,host}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"PostgreSQL rows fetched / returned"},"id":65613162},{"definition":{"requests":[{"q":"sum:postgresql.rows_inserted{$environment}, sum:postgresql.rows_deleted{$environment}, sum:postgresql.rows_updated{$environment}","style":{"palette":"dog_classic"},"display_type":"line"},{"q":"sum:postgresql.rows_inserted{$environment}, sum:postgresql.rows_deleted{$environment}, sum:postgresql.rows_updated{$environment}","style":{"palette":"dog_classic"},"display_type":"line"}],"type":"timeseries","title":"PostgreSQL inserts / updates / deletes (rows / s)"},"id":65613056},{"definition":{"requests":[{"q":"sum:pgbouncer.pools.cl_active{$environment} by {host}.rollup(max)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Pgbouncer client connections by host (max rollup)"},"id":190465595},{"definition":{"requests":[{"q":"avg:pgbouncer.pools.cl_waiting{$environment} by {host}","display_type":"area"}],"type":"timeseries","title":"PG bouncer connections waiting"},"id":199449170},{"definition":{"requests":[{"q":"sum:postgresql.connections{$environment} by {host}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"},{"q":"sum:aws.rds.database_connections{$environment} by {dbinstanceidentifier}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"},{"q":"sum:postgresql.max_connections{$environment} by {host}","style":{"line_width":"normal","palette":"dog_classic","line_type":"dashed"},"display_type":"line"}],"type":"timeseries","title":"PostgreSQL connections by Host"},"id":65613374},{"definition":{"requests":[{"q":"sum:postgresql.connections.state{database:commcarehq_icds_aggregatedata,$environment} by {state}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"ICDS UCR DB connections by state"},"id":317408406},{"definition":{"requests":[{"q":"sum:system.io.await{$environment,group:postgresql} by {host,device}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Disk IO Latency"},"id":1780126538630174},{"definition":{"tick_pos":"50%","font_size":"16","type":"note","tick_edge":"left","text_align":"left","content":"For more detail see [PostgreSQL Dashboard](https://app.datadoghq.com/dashboard/unt-6cf-nbs/postgres---overview)","background_color":"blue"},"id":4696814201290214}],"layout_type":"ordered","type":"group","title":"PostgreSQL & PGBouncer"},"id":4106792492082010},{"definition":{"widgets":[{"definition":{"requests":[{"q":"per_minute(avg:elasticsearch.search.query.time{$environment})/per_minute(avg:elasticsearch.search.query.total{$environment})*1000","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"},{"q":"per_minute(avg:elasticsearch.search.fetch.time{$environment})/per_minute(avg:elasticsearch.search.fetch.total{$environment})*1000","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Elasticsearch query and fetch latency"},"id":271743284},{"definition":{"requests":[{"q":"sum:commcare.es.partial_results{$environment}.as_count()","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"title":"ES Partial Results (shard failure)","type":"timeseries","yaxis":{"include_zero":false,"scale":"log"}},"id":4079489701328082},{"definition":{"requests":[{"q":"per_second(sum:elasticsearch.search.query.total{$environment})","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Elasticsearch Searches / second"},"id":271743637},{"definition":{"requests":[{"q":"per_second(avg:elasticsearch.get.total{$environment} by {node_name}), per_second(sum:elasticsearch.get.total{$environment})","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Elasticsearch Gets / second"},"id":271743759}],"layout_type":"ordered","type":"group","title":"Elasticsearch"},"id":947547473129060},{"definition":{"widgets":[{"definition":{"requests":[{"q":"avg:riakcs.object_get_time_99{$environment}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"},{"q":"avg:riakcs.object_put_time_99{$environment}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"},{"q":"avg:riakcs.object_delete_time_99{$environment}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"RiakCS timing"},"id":202575213},{"definition":{"requests":[{"q":"avg:riak.node_gets{$environment} by {host}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Riak Gets by host"},"id":202328080},{"definition":{"requests":[{"q":"avg:riak.node_puts{$environment} by {host}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Riak Puts by host"},"id":202328930},{"definition":{"requests":[{"q":"sum:commcare.blobs.requests.timing{$environment} by {duration}.as_count()","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"title":"S3 Blobdb timings","type":"timeseries","yaxis":{"include_zero":false,"scale":"log"}},"id":330097790},{"definition":{"requests":[{"q":"sum:commcare.blobs.requests.timing{$environment,s3_bucket_name:blobdb} by {duration}.as_count()","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"title":"S3 Blobdb timings (bucket: 'blobdb')","type":"timeseries","yaxis":{"include_zero":false,"scale":"log"}},"id":330103588},{"definition":{"requests":[{"q":"sum:commcare.blobs.requests.timing{$environment,s3_bucket_name:mowcddb-c1} by {duration}.as_count()","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"title":"S3 Blobdb timings (bucket: 'mowcddb-c1')","type":"timeseries","yaxis":{"include_zero":false,"scale":"log"}},"id":355205876},{"definition":{"requests":[{"q":"sum:commcare.blobs.requests.timing{$environment,s3_bucket_name:dimagi-commcare-production-blobdb} by {duration}.as_count()","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"title":"S3 Blobdb timings PRODUCTION (bucket: 'dimagi-commcare-production-blobdb')","type":"timeseries","yaxis":{"include_zero":false,"scale":"log"}},"id":366000512}],"layout_type":"ordered","type":"group","title":"Blobdb"},"id":5445122637216276},{"definition":{"widgets":[{"definition":{"requests":[{"q":"avg:redis.info.latency_ms{$environment} by {host}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Redis Latency"},"id":202618817},{"definition":{"requests":[{"q":"sum:redis.slowlog.micros.95percentile{$environment} by {command}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Redis Slow Log (95p by command)"},"id":202619222},{"definition":{"requests":[{"q":"avg:redis.net.clients{$environment} by {host}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Redis Clients"},"id":202620769},{"definition":{"requests":[{"q":"(avg:redis.stats.keyspace_hits{$environment} by {host}/(avg:redis.stats.keyspace_hits{$environment} by {host}+avg:redis.stats.keyspace_misses{$environment} by {host}))*100","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","markers":[{"display_type":"ok dashed","value":"y = 100","label":"Ideal hit rate"},{"display_type":"error dashed","value":"y = 75","label":"Investigate"}],"title":"Redis Cache hit rate"},"id":202620788},{"definition":{"tick_pos":"50%","font_size":"14","type":"note","tick_edge":"left","text_align":"left","content":"For more on redis see [Redis Timeboard](https://app.datadoghq.com/dashboard/tr7-nw2-bgb/redis-timeboard)","background_color":"blue"},"id":6153958238565820}],"layout_type":"ordered","type":"group","title":"Redis"},"id":337808563436716},{"definition":{"requests":[{"q":"sum:commcare.change_feed.changes.count{$environment} by {pillow_name}.as_rate()","display_type":"line"}],"type":"timeseries","events":[{"q":"tags:$environment deploy ","tags_execution":"and"}],"title":"Pillow processing rates"},"id":200532503},{"definition":{"requests":[{"q":"avg:commcare.submission_reprocessing.queue_size{$environment}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Form reprocessing queue"},"id":333210101},{"definition":{"requests":[{"q":"sum:commcare.submission_reprocessing.count{$environment}.as_count()","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","title":"Reprocessed forms"},"id":333210054},{"definition":{"requests":[{"q":"sum:celery.tasks_completed{$environment} by {celery_queue}","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","title":"Sum of celery.tasks_completed over $environment by celery_queue"},"id":294057009539838}],"layout_type":"ordered"}

{"notify_list":[],"description":"","template_variables":[{"default":"icds","prefix":"environment","name":"environment"}],"is_read_only":false,"id":"a4u-nfz-gex","title":"Mobile Request Success","url":"/dashboard/a4u-nfz-gex/mobile-request-success","created_at":"2017-04-28T17:58:56.713470+00:00","modified_at":"2019-06-14T06:42:46.910078+00:00","author_handle":"cellowitz@dimagi.com","widgets":[{"definition":{"requests":[{"q":"(sum:nginx.requests{$environment,status_code:412,url_group:phone}.rollup(sum, 3600)+sum:nginx.requests{$environment,status_code:200,url_group:phone}.rollup(sum, 3600)+sum:nginx.requests{$environment,status_code:202,url_group:phone}.rollup(sum, 3600))*100/(sum:nginx.requests{$environment,url_group:phone}.rollup(sum, 3600)-sum:nginx.requests{$environment,status_code:401,url_group:phone}.rollup(sum, 3600))","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"},{"q":"(sum:nginx.requests{$environment,status_code:412,url_group:phone/restore}.rollup(sum, 3600)+sum:nginx.requests{$environment,status_code:200,url_group:phone/restore}.rollup(sum, 3600)+sum:nginx.requests{$environment,status_code:202,url_group:phone/restore}.rollup(sum, 3600))*100/(sum:nginx.requests{$environment,url_group:phone/restore}.rollup(sum, 3600)-sum:nginx.requests{$environment,status_code:401,url_group:phone/restore}.rollup(sum, 3600))","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"markers":[{"display_type":"ok dashed","value":"y = 100"}],"title":"Restores: % Correct Response (hourly)"},"id":201271778},{"definition":{"requests":[{"q":"(sum:nginx.requests{$environment,status_code:412,url_group:phone/restore}.rollup(sum, 86400)+sum:nginx.requests{$environment,status_code:200,url_group:phone/restore}.rollup(sum, 86400)+sum:nginx.requests{$environment,status_code:202,url_group:phone/restore}.rollup(sum, 86400))*100/(sum:nginx.requests{$environment,url_group:phone/restore}.rollup(sum, 86400)-sum:nginx.requests{$environment,status_code:401,url_group:phone/restore}.rollup(sum, 86400))","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"},{"q":"(sum:nginx.requests{$environment,status_code:412,url_group:phone}.rollup(sum, 86400)+sum:nginx.requests{$environment,status_code:200,url_group:phone}.rollup(sum, 86400)+sum:nginx.requests{$environment,status_code:202,url_group:phone}.rollup(sum, 86400))*100/(sum:nginx.requests{$environment,url_group:phone}.rollup(sum, 86400)-sum:nginx.requests{$environment,status_code:401,url_group:phone}.rollup(sum, 86400))","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"},{"q":"robust_trend((sum:nginx.requests{$environment,status_code:412,url_group:phone/restore}.rollup(sum, 86400)+sum:nginx.requests{$environment,status_code:200,url_group:phone/restore}.rollup(sum, 86400)+sum:nginx.requests{$environment,status_code:202,url_group:phone/restore}.rollup(sum, 86400))*100/(sum:nginx.requests{$environment,url_group:phone/restore}.rollup(sum, 86400)-sum:nginx.requests{$environment,status_code:401,url_group:phone/restore}.rollup(sum, 86400)))","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"line"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"markers":[{"display_type":"ok dashed","value":"y = 100"}],"title":"Restores: % Correct Response (daily)"},"id":201275801},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,url_group:receiver,status_code:201}.as_count().rollup(sum, 3600)*100/(sum:nginx.requests{$environment,url_group:receiver}.as_count().rollup(sum, 3600)-sum:nginx.requests{$environment,url_group:receiver,status_code:401}.as_count().rollup(sum, 3600))","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"markers":[{"display_type":"ok dashed","value":"y = 100"}],"title":"Form submissions: % Correct Response (hourly)"},"id":201287473},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,url_group:receiver,status_code:201}.as_count().rollup(sum, 86400)*100/(sum:nginx.requests{$environment,url_group:receiver}.as_count().rollup(sum, 86400)-sum:nginx.requests{$environment,url_group:receiver,status_code:401}.as_count().rollup(sum, 86400))","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"},{"q":"robust_trend(sum:nginx.requests{$environment,url_group:receiver,status_code:201}.as_count().rollup(sum, 86400)*100/(sum:nginx.requests{$environment,url_group:receiver}.as_count().rollup(sum, 86400)-sum:nginx.requests{$environment,url_group:receiver,status_code:401}.as_count().rollup(sum, 86400)))","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"markers":[{"display_type":"ok dashed","value":"y = 100"}],"title":"Form submissions: % Correct Response (daily)"},"id":201304765},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,status_code:200,url_group:phone}.as_count().rollup(sum, 3600), sum:nginx.requests{$environment,status_code:200,url_group:phone/restore}.as_count().rollup(sum, 3600)","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"title":"Successful Restores (hourly)"},"id":201277134},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,status_code:200,url_group:phone/restore}.rollup(sum, 86400)+sum:nginx.requests{$environment,status_code:200,url_group:phone}.rollup(sum, 86400)","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"},{"q":"robust_trend(sum:nginx.requests{$environment,status_code:200,url_group:phone/restore}.rollup(sum, 86400)+sum:nginx.requests{$environment,status_code:200,url_group:phone}.rollup(sum, 86400))","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"line"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"title":"Successful Restores (daily)"},"id":201277133},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,url_group:receiver,status_code:201}.as_count().rollup(sum, 3600)","display_type":"bars"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"title":"Successful form submissions (hourly)"},"id":201278361},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,url_group:receiver,status_code:201}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"},{"q":"robust_trend(sum:nginx.requests{$environment,url_group:receiver,status_code:201}.as_count().rollup(sum, 86400))","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"title":"Successful form submissions (daily)"},"id":201277055},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,url_group:phone} by {status_code}.rollup(sum, 3600), sum:nginx.requests{$environment,url_group:phone/restore} by {status_code}.rollup(sum, 3600)","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"title":"Restores by status code (hourly)"},"id":201266268},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,url_group:phone,!status_code:401} by {status_code}.rollup(sum, 86400), sum:nginx.requests{$environment,url_group:phone/restore,!status_code:401} by {status_code}.rollup(sum, 86400)","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"title":"Restores by status code (daily)"},"id":201275243},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,url_group:receiver} by {status_code}.rollup(sum, 3600)","display_type":"bars"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"title":"Form submissions by status code (hourly)"},"id":201276823},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,url_group:receiver,!status_code:401} by {status_code}.rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"title":"Form submissions by status code (daily)"},"id":201278363},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,url_group:apps,status_code:200}.as_count().rollup(sum, 86400)*100/sum:nginx.requests{$environment,url_group:apps}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"title":"App installs success rate (by day)","type":"timeseries","markers":[{"display_type":"ok dashed","value":"y = 100"}],"yaxis":{"max":"100"}},"id":233657084},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,url_group:apps}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","title":"App installs by day"},"id":332896474},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment}.rollup(sum, 3600)","display_type":"bars"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"title":"Total Requests (hourly)"},"id":201277054},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment} by {status_code}.rollup(sum, 3600)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"title":"Sum of nginx.requests over $environment by status_code"},"id":840637135136272},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment} by {url_group}.rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"},{"q":"robust_trend(sum:nginx.requests{$environment}.rollup(sum, 86400))","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"title":"Total Requests (daily)"},"id":201276826},{"definition":{"requests":[{"q":"100*sum:nginx.requests{$environment,status_code:503}.as_count().rollup(sum, 3600)/sum:nginx.requests{$environment}.as_count().rollup(sum, 3600)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","markers":[{"display_type":"error dashed","value":"y = 100"}],"title":"Rate limiting: % limited requests (hourly)"},"id":241296737},{"definition":{"requests":[{"q":"100*sum:nginx.requests{$environment,status_code:503}.as_count().rollup(sum, 86400)/sum:nginx.requests{$environment}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"},{"q":"robust_trend(100*sum:nginx.requests{$environment,status_code:503}.as_count().rollup(sum, 86400)/sum:nginx.requests{$environment}.as_count().rollup(sum, 86400))","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"line"}],"type":"timeseries","markers":[{"display_type":"error dashed","value":"y = 100"}],"title":"Rate limiting: % limited requests (daily)"},"id":255625236},{"definition":{"requests":[{"q":"sum:commcare.sentry.errors.rate_limited{$environment} by {service}.as_count().rollup(sum, 3600)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"title":"Service interruptions per hour"},"id":201899713},{"definition":{"requests":[{"q":"sum:commcare.sentry.errors.rate_limited{$environment} by {service}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","title":"Service Interruptions per day"},"id":202860671},{"definition":{"requests":[{"q":"top(avg:commcare.restores.count{$environment} by {app}.as_count(), 25, 'mean', 'desc')","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","title":"Restores by App (enterprise only) (top 25)"},"id":311843007},{"definition":{"requests":[{"q":"sum:commcare.xform_submissions.count{$environment} by {duration}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","title":"Form submission timing"},"id":384868429},{"definition":{"requests":[{"q":"sum:commcare.restores.count{$environment} by {duration}.as_count().rollup(sum, 86400)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","title":"Restore timing"},"id":384868444},{"definition":{"requests":[{"q":"cumsum(sum:commcare.xform_submissions.count{$environment} by {submission_type}.as_count())","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","title":"Sum of commcare.xform_submissions.count over $environment by submission_type"},"id":399588887},{"definition":{"requests":[{"q":"cumsum(sum:commcare.restores.count{$environment}.as_count())","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","title":"Sum of commcare.restores.count over $environment"},"id":399588888},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,url_group:phone/keys}, sum:nginx.requests{$environment,url_group:phone/search}, sum:nginx.requests{$environment,url_group:phone/heartbeat}, sum:nginx.requests{$environment,url_group:phone/claim-case}","style":{"line_width":"normal","palette":"cool","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","events":[{"q":"tags:$environment Deploy Successful ","tags_execution":"and"}],"title":"OTA APIs"},"id":7987927523934248},{"definition":{"requests":[{"q":"sum:nginx.requests{$environment,url_group:receiver}.rollup(sum, 604800), sum:nginx.requests{$environment,url_group:phone/restore}.rollup(sum, 604800)","style":{"line_width":"normal","palette":"dog_classic","line_type":"solid"},"display_type":"bars"}],"type":"timeseries","title":"Submissions & Restores (weekly)"},"id":2335370103052894},{"definition":{"requests":[{"change_type":"absolute","order_dir":"desc","compare_to":"week_before","q":"sum:nginx.requests{$environment} by {url_group}.as_count()","increase_good":true,"order_by":"change"}],"type":"change","title":"Requests (change since last week)"},"id":2804499936385206}],"layout_type":"ordered"}
